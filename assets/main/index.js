System.register("chunks:///_virtual/AnimationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./GameKey.ts","./GameConfig.ts"],(function(e){var r,t,i,n,o,a,s,l,u,f,c,d,b,p,h,y,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,a=e.createForOfIteratorHelperLoose,s=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,f=e.Prefab,c=e.instantiate,d=e.tween,b=e.Vec3,p=e.Component},function(e){h=e.Utils},function(e){y=e.GAMEKEY},function(e){g=e.default}],execute:function(){var L,x,I,w,m,E,T,P,v;l._RF.push({},"5b4df2bqu1MCIyggXbVE+Xq","AnimationManager",void 0);var G=u.ccclass,A=u.property;e("default",(L=G("AnimationManager"),x=A(f),I=A(f),w=A(f),L((T=r((E=function(e){t(l,e);var r=l.prototype;function l(r){var t;return t=e.call(this)||this,i(t,"fireworkPrefab",T,n(t)),i(t,"fireBallPrefab",P,n(t)),i(t,"bombPrefab",v,n(t)),t.board=void 0,t.shootOne=o(s().mark((function e(r,i,n,o,a){var l,u,f,p,y,L,x,I,w;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=h.getTileCoords(t.board.getTileGrid(),n),u=l.x,f=l.y,p=h.getTilePosition({x:u,y:f}),y=c(t.fireBallPrefab),L=0,1===r&&0===i&&(L=0),-1===r&&0===i&&(L=180),0===r&&1===i&&(L=270),0===r&&-1===i&&(L=90),y.setRotationFromEuler(0,0,L),y.setPosition(p.x,p.y,3),t.board.getEffectLayer().addChild(y),x=[],I=s().mark((function e(){var n,o,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f+i*w,!((n=u+r*w)<0||n>=g.GridWidth||o<0||o>=g.GridHeight)){e.next=4;break}return e.abrupt("return",1);case 4:return l=h.getTilePosition({x:n,y:o}),e.next=7,new Promise((function(e){d(y).to(a,{position:new b(l.x,l.y,0)}).call((function(){return e()})).start()}));case 7:(c=t.board.getTileGrid()[o][n])&&x.push(c);case 9:case"end":return e.stop()}}),e)})),w=1;case 14:if(!(w<o)){e.next=21;break}return e.delegateYield(I(),"t0",16);case 16:if(!e.t0){e.next=18;break}return e.abrupt("break",21);case 18:w++,e.next=14;break;case 21:return e.next=23,t.board.removeTileGroup(x);case 23:y.destroy();case 24:case"end":return e.stop()}}),e)}))),t.board=r,t}return r.__preload=function(){if(null===this.fireworkPrefab)throw new Error("Firework prefab is not set");if(null===this.fireBallPrefab)throw new Error("FireBall prefab is not set");if(null===this.bombPrefab)throw new Error("Bomb prefab is not set")},r.spawnFireworkEffect=function(e){var r=h.getTileCoords(this.board.getTileGrid(),e),t=r.x,i=r.y,n=h.getTilePosition({x:t,y:i}),o=c(this.fireworkPrefab);return o.setPosition(n.x,n.y,0),this.board.getEffectLayer().addChild(o),Promise.resolve()},r.spawnFireBall=function(){var e=o(s().mark((function e(r,t){var i,n,o,a,l,u,f=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=h.getTileCoords(this.board.getTileGrid(),t),n=i.x,o=i.y,h.getTilePosition({x:n,y:o}),a=r?g.GridWidth:g.GridHeight,l=.5/a,u=r?[{dx:-1,dy:0},{dx:1,dy:0}]:[{dx:0,dy:-1},{dx:0,dy:1}],e.abrupt("return",Promise.all(u.map((function(e){return f.shootOne(e.dx,e.dy,t,a,l)}))).then((function(){})));case 6:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}(),r.runAnimations=function(e){return new Promise((function(r){var t=e.length;if(0===t)return r();for(var i,n=function(){var e=i.value,n=e.tile,o=e.from,a=e.to,s=(h.getTilePosition(o),h.getTilePosition(a)),l=.15*Math.abs(a.y-o.y);d(n.node).to(l,{position:new b(s.x,s.y,0)}).call((function(){d(n.node).to(.08,{scale:new b(y.TILE.ORIGINAL.SCALE.x+.2,y.TILE.ORIGINAL.SCALE.y-.2,y.TILE.ORIGINAL.SCALE.z)}).to(.08,{scale:new b(y.TILE.ORIGINAL.SCALE.x,y.TILE.ORIGINAL.SCALE.y,y.TILE.ORIGINAL.SCALE.z)}).call((function(){0==--t&&r()})).start()})).start()},o=a(e);!(i=o()).done;)n()}))},r.bombExplode=function(e){var r=h.getTileCoords(this.board.getTileGrid(),e),t=r.x,i=r.y,n=h.getTilePosition({x:t,y:i}),o=c(this.bombPrefab);o.setPosition(n.x,n.y,0),this.board.getEffectLayer().addChild(o);for(var a=[],s=-1;s<=1;s++)for(var l=-1;l<=1;l++){var u=t+l,f=i+s;if(u>=0&&u<g.GridWidth&&f>=0&&f<g.GridHeight){var d=this.board.getTileGrid()[f][u];d&&a.push(d)}}return this.board.removeTileGroup(a)},r.explodeAnimation=function(e){return new Promise((function(r){d(e.node).to(.15,{scale:new b(y.TILE.ORIGINAL.SCALE.x+.2,y.TILE.ORIGINAL.SCALE.y+.2,1)},{easing:"backOut"}).to(.1,{scale:new b(y.TILE.ORIGINAL.SCALE.x,y.TILE.ORIGINAL.SCALE.y,1)},{easing:"quadIn"}).call((function(){r()})).start()}))},r.setBoard=function(e){this.board=e},l}(p)).prototype,"fireworkPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(E.prototype,"fireBallPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(E.prototype,"bombPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=E))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/AssetLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,s,a,i,n,c,p,u,l;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,s=r.assertThisInitialized},function(r){a=r.cclegacy,i=r._decorator,n=r.ProgressBar,c=r.director,p=r.resources,u=r.SpriteFrame,l=r.Component}],execute:function(){var d,f,g,h,B;a._RF.push({},"ff792SUt8BAQoHTgLc+DQEW","AssetLoader",void 0);var m=i.ccclass,y=i.property;r("AssetLoader",(d=m("AssetLoader"),f=y(n),d((B=e((h=function(r){function e(){for(var e,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=r.call.apply(r,[this].concat(a))||this,t(e,"progressBar",B,s(e)),e}o(e,r);var a=e.prototype;return a.__preload=function(){if(!this.progressBar)throw new Error("ProgressBar is required");c.preloadScene("GameScene"),p.preloadDir("images")},a.start=function(){var r=this;p.loadDir("images",u,(function(e,o){r.updateProgressBar(e/o)}),(function(e){e?console.error(e):(r.updateProgressBar(1),r.switchToGameScene())}))},a.updateProgressBar=function(r){this.progressBar.progress=r},a.switchToGameScene=function(){c.loadScene("GameScene")},e}(l)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./TilePool.ts","./GameKey.ts","./Cell.ts","./Utils.ts","./Rainbow.ts"],(function(e){var t,i,r,n,o,l,s,a,c,h,d,u,f,p,T,v,g,G,y,w,S,m,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,l=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,h=e.Prefab,d=e.Node,u=e.instantiate,f=e.Input,p=e.log,T=e.tween,v=e.Vec3,g=e.Component},function(e){G=e.default},function(e){y=e.TilePool},function(e){w=e.GAMEKEY},function(e){S=e.Cell},function(e){m=e.Utils},function(e){L=e.RainbowTile}],execute:function(){var E,x,I,b,C,A,M,P,k,N,O,R,z,H,B;a._RF.push({},"a4247KM8NhM0YgqsnkQwjCa","Board",void 0);var W=c.ccclass,F=c.property;e("default",(E=W("Board"),x=F(h),I=F(h),b=F(h),C=F(d),A=F(d),M=F(d),E((N=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).canMove=!1,t.tileGrid=[],t.firstSelectedTile=void 0,t.secondSelectedTile=void 0,t.animationManager=void 0,r(t,"tilePoolPrefab",N,n(t)),t.tilePool=void 0,r(t,"selectorPrefab",O,n(t)),t.selectorNode=null,t.selectorTween=void 0,r(t,"cellPrefab",R,n(t)),t.cellNode=null,r(t,"cellLayer",z,n(t)),r(t,"tileLayer",H,n(t)),r(t,"effectLayer",B,n(t)),t.point=0,t}i(t,e);var a=t.prototype;return a.__preload=function(){if(null===this.tilePoolPrefab)throw new Error("Tile pool prefab is not set");if(null===this.selectorPrefab)throw new Error("Selector prefab is not set");if(null===this.cellPrefab)throw new Error("Cell prefab is not set");if(null===this.cellLayer)throw new Error("CellLayer is not set");if(null===this.tileLayer)throw new Error("TileLayer is not set");if(null===this.effectLayer)throw new Error("EffectLayer is not set")},a.start=function(){var e=u(this.tilePoolPrefab);if(null===e)throw new Error("Failed to instantiate tile pool prefab");var t=e.getComponent(y);if(null===t)throw new Error("Failed to get tile pool component");this.node.addChild(e),this.tilePool=t;var i=u(this.selectorPrefab);i.active=!1,this.node.addChild(i),this.selectorNode=i,this.createBoard()},a.createBoard=function(){this.canMove=!0,this.tileGrid=[];for(var e=0;e<G.GridHeight;e++){this.tileGrid[e]=[];for(var t=0;t<G.GridWidth;t++){this.createCell(t,e);this.tileGrid[e][t]=this.addTile(t,e)}}this.firstSelectedTile=void 0,this.secondSelectedTile=void 0,this.checkMatches()},a.addTile=function(e,t,i,r){var n=this,o=this.tilePool.getTile(e,t,i,r);return o.addOnClickCallback((function(e){return n.tileDown(e)})),this.addHoverEffect(o),this.tileLayer.addChild(o.node),o},a.addHoverEffect=function(e){var t=this;e.node.on(f.EventType.MOUSE_ENTER,(function(){t.canMove&&(p("scale lên to 1.2 lần"),T(e.node).to(.1,{scale:new v(w.TILE.ORIGINAL.SCALE.x+.1,w.TILE.ORIGINAL.SCALE.y+.1,w.TILE.ORIGINAL.SCALE.z)},{easing:"sineOut"}).start())})),e.node.on(f.EventType.MOUSE_LEAVE,(function(){T(e.node).to(.1,{scale:new v(w.TILE.ORIGINAL.SCALE.x,w.TILE.ORIGINAL.SCALE.y,w.TILE.ORIGINAL.SCALE.z)},{easing:"sineOut"}).start()}))},a.createCell=function(e,t){var i=u(this.cellPrefab);if(null===i)throw new Error("Failed to instantiate cell prefab");var r=i.getComponent(S);if(null===r)throw new Error("Failed to get cell component");r.setCellType((e+t)%2+1);var n=m.getTilePosition({x:e,y:t}),o=n.x,l=n.y;return i.setPosition(o,l),this.cellLayer.addChild(r.node),r},a.tileDown=function(e){if(this.canMove)if(this.firstSelectedTile){this.secondSelectedTile=e;var t=m.getTileCoords(this.tileGrid,this.firstSelectedTile),i=m.getTileCoords(this.tileGrid,this.secondSelectedTile),r=Math.abs(t.x-i.x),n=Math.abs(t.y-i.y);1===r&&0===n||0===r&&1===n?(this.canMove=!1,this.swapTiles()):(this.selectorNode.parent=e.node,this.firstSelectedTile=e,this.secondSelectedTile=void 0)}else this.firstSelectedTile=e,this.selectorNode.parent=e.node,this.selectorNode.setPosition(0,0,1),this.selectorNode.active=!0,this.selectorTween=T(this.selectorNode).to(.3,{scale:new v(1.1,1.1,1)},{easing:"sineInOut"}).to(.3,{scale:new v(1,1,1)},{easing:"sineInOut"}).union().repeatForever().start()},a.swapTiles=function(){var e=this;if(this.firstSelectedTile&&this.secondSelectedTile){var t=m.getTileCoords(this.tileGrid,this.firstSelectedTile),i=m.getTileCoords(this.tileGrid,this.secondSelectedTile);T(this.firstSelectedTile.node).to(.4,{position:new v(this.secondSelectedTile.node.x,this.secondSelectedTile.node.y,this.firstSelectedTile.node.position.z)},{easing:"linear"}).start(),T(this.secondSelectedTile.node).to(.4,{position:new v(this.firstSelectedTile.node.x,this.firstSelectedTile.node.y,this.secondSelectedTile.node.position.z)},{easing:"linear"}).call((function(){e.tileGrid[t.y][t.x]=e.secondSelectedTile,e.tileGrid[i.y][i.x]=e.firstSelectedTile,e.firstSelectedTile instanceof L||e.secondSelectedTile instanceof L?e.rainbow().then((function(){e.tileUp(),e.animateDropAndFill().then((function(){e.checkMatches()}))})):e.checkMatches()})).start(),this.firstSelectedTile=this.tileGrid[t.y][t.x],this.secondSelectedTile=this.tileGrid[i.y][i.x]}},a.rainbow=function(){var e,t="",i=[];(null==(e=this.firstSelectedTile)?void 0:e.getSpecialType())===G.SpecialEffects.RAINBOW?(t=this.secondSelectedTile.getTileType(),i.push(this.firstSelectedTile)):(t=this.firstSelectedTile.getTileType(),i.push(this.secondSelectedTile));for(var r=0;r<G.GridHeight;r++)for(var n=0;n<G.GridWidth;n++){var o=this.tileGrid[r][n];o.getTileType()==t&&i.push(o)}return this.removeTileGroup(i)},a.swapTilesBack=function(){if(this.firstSelectedTile&&this.secondSelectedTile){var e=m.getTileCoords(this.tileGrid,this.firstSelectedTile),t=m.getTileCoords(this.tileGrid,this.secondSelectedTile);this.tileGrid[e.y][e.x]=this.secondSelectedTile,this.tileGrid[t.y][t.x]=this.firstSelectedTile,T(this.firstSelectedTile.node).to(.4,{position:new v(this.secondSelectedTile.node.x,this.secondSelectedTile.node.y,this.firstSelectedTile.node.position.z)},{easing:"linear"}).start(),T(this.secondSelectedTile.node).to(.4,{position:new v(this.firstSelectedTile.node.x,this.firstSelectedTile.node.y,this.secondSelectedTile.node.position.z)},{easing:"linear"}).start()}},a.checkMatches=function(){var e=this,t=this.getMatches(this.tileGrid);t.length>0?this.matchWorking(t).then((function(){e.tileUp(),e.animateDropAndFill().then((function(){e.checkMatches()}))})):(this.swapTilesBack(),this.tileUp(),this.canMove=!0)},a.animateDropAndFill=function(){for(var e=[],t=0;t<G.GridWidth;t++)for(var i=G.GridHeight-1;i>=0;i--){var r=this.tileGrid[i][t];if(this.tileGrid[i][t]){for(var n=i;n<G.GridHeight-1&&!this.tileGrid[n+1][t];)n++;n!=i&&(this.tileGrid[n][t]=r,this.tileGrid[i][t]=void 0,e.push({tile:r,from:{x:t,y:i},to:{x:t,y:n}}))}}for(var o=0;o<G.GridWidth;o++){for(var l=0,s=0;s<G.GridHeight;s++)this.tileGrid[s][o]||l++;for(var a=0;a<l;a++){var c=-1-a,h=l-a-1,d=this.addTile(o,c);this.tileGrid[h][o]=d,e.push({tile:d,from:{x:o,y:c},to:{x:o,y:h}})}}return this.animationManager.runAnimations(e)},a.tileUp=function(){this.firstSelectedTile&&(this.selectorNode.active=!1,this.selectorTween&&this.selectorTween.stop(),this.firstSelectedTile.node.setScale(w.TILE.ORIGINAL.SCALE.x,w.TILE.ORIGINAL.SCALE.y,w.TILE.ORIGINAL.SCALE.z)),this.firstSelectedTile=void 0,this.secondSelectedTile=void 0},a.removeSpecialTile=function(){var e=l(s().mark((function e(t){var i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getSpecialType(),r=i.split("_")[1],e.t0=r,e.next=e.t0===G.SpecialEffects.HORIZONTAL?5:e.t0===G.SpecialEffects.VERTICAL?7:e.t0===G.SpecialEffects.BOMB?9:11;break;case 5:return this.animationManager.explodeAnimation,e.abrupt("return",this.animationManager.spawnFireBall(!0,t));case 7:return this.animationManager.explodeAnimation,e.abrupt("return",this.animationManager.spawnFireBall(!1,t));case 9:return this.animationManager.explodeAnimation,e.abrupt("return",this.animationManager.bombExplode(t));case 11:if(i!=G.SpecialEffects.RAINBOW){e.next=13;break}return e.abrupt("return",Promise.resolve());case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getMatches=function(e){for(var t=this,i=[],r=0;r<G.GridHeight;r++){for(var n=[],o=0;o<G.GridWidth;o++)n.push(!1);i.push(n)}for(var l=[],s=0;s<G.GridHeight;s++)for(var a=0;a<G.GridWidth;a++)if(!i[s][a]){var c=this.tileGrid[s][a];if(c){var h=this.getMatch(c),d=h.horizontal,u=h.vertical;d.length>=3&&d.forEach((function(e){var r=m.getTileCoords(t.tileGrid,e),n=r.x,o=r.y;i[o][n]=!0})),u.length>=3&&u.forEach((function(e){var r=m.getTileCoords(t.tileGrid,e),n=r.x,o=r.y;i[o][n]=!0})),(d.length>=3||u.length>=3)&&l.push({horizontal:d,vertical:u})}}return l},a.getMatch=function(e){for(var t=this.checkHorizontalMatch(e),i=this.checkVerticalMatch(e),r=1;r<t.length;r++){var n=this.checkHorizontalMatch(t[r]),o=this.checkVerticalMatch(t[r]);n.length+o.length-1>t.length+i.length-1&&(t=n,i=o)}for(var l=1;l<i.length;l++){var s=this.checkHorizontalMatch(i[l]),a=this.checkVerticalMatch(i[l]);s.length+a.length-1>t.length+i.length-1&&(t=s,i=a)}return{horizontal:t,vertical:i}},a.checkHorizontalMatch=function(e){for(var t=m.getTileCoords(this.tileGrid,e),i=t.x,r=t.y,n=[e],o=i-1;o>=0&&this.tileGrid[r][o]&&(null==(l=this.tileGrid[r][o])?void 0:l.getTileType())==e.getTileType();){var l;n.push(this.tileGrid[r][o]),o--}for(o=i+1;o<G.GridWidth&&this.tileGrid[r][o]&&(null==(s=this.tileGrid[r][o])?void 0:s.getTileType())==e.getTileType();){var s;n.push(this.tileGrid[r][o]),o++}return n.length>=3?n:[]},a.checkVerticalMatch=function(e){for(var t=m.getTileCoords(this.tileGrid,e),i=t.x,r=t.y,n=[e],o=r-1;o>=0&&this.tileGrid[o][i]&&(null==(l=this.tileGrid[o][i])?void 0:l.getTileType())==e.getTileType();){var l;n.push(this.tileGrid[o][i]),o--}for(o=r+1;o<G.GridHeight&&this.tileGrid[o][i]&&(null==(s=this.tileGrid[o][i])?void 0:s.getTileType())==e.getTileType();){var s;n.push(this.tileGrid[o][i]),o++}return n.length>=3?n:[]},a.matchWorking=function(){var e=l(s().mark((function e(t){var i,r,n,l,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=[],r=o(t);!(n=r()).done;)l=n.value,a=l.horizontal,c=l.vertical,5==a.length||5==c.length?a.length>=3&&c.length>=3?(c.shift(),i.push(this.match5(a.concat(c)))):5==a.length?i.push(this.match5(a)):i.push(this.match5(c)):a.length>=3&&c.length>=3?(c.shift(),i.push(this.match2Row(a.concat(c)))):4==a.length||4==c.length?4==a.length?i.push(this.match4(a)):i.push(this.match4(c)):3==a.length?i.push(this.removeTileGroup(a)):3==c.length&&i.push(this.removeTileGroup(c));return e.next=4,Promise.all(i);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.match5=function(){var e=l(s().mark((function e(t){var i,r,n,o,a,c,h,d=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[2],t.splice(2,1),r=i.node.getWorldPosition(),n=t.map((function(e){d.animationManager.spawnFireworkEffect(e);var t=m.getTileCoords(d.tileGrid,e);t.x,t.y;return new Promise((function(t){T(e.node).to(.3,{worldPosition:new v(r.x,r.y,r.z)}).call(l(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d.removeTileGroup([e]);case 3:i.next=7;break;case 5:i.prev=5,i.t0=i.catch(0);case 7:t();case 8:case"end":return i.stop()}}),i,null,[[0,5]])})))).start()}))})),o=i.getTileType(),a=m.getTileCoords(this.tileGrid,i),c=a.x,h=a.y,e.next=8,this.removeTileGroup([i]);case 8:return e.abrupt("return",Promise.all(n).then((function(){var e=G.SpecialEffects.RAINBOW;d.tileGrid[h][c]=d.addTile(c,h,e,o)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.match2Row=function(){var e=l(s().mark((function e(t){var i,r,n,o,a,c,h,d=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[0],r=i.node.getWorldPosition(),n=t.slice(1).map((function(e){d.animationManager.spawnFireworkEffect(e);var t=m.getTileCoords(d.tileGrid,e);t.x,t.y;return new Promise((function(t){T(e.node).to(.2,{worldPosition:r}).call(l(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d.removeTileGroup([e]);case 3:i.next=7;break;case 5:i.prev=5,i.t0=i.catch(0);case 7:t();case 8:case"end":return i.stop()}}),i,null,[[0,5]])})))).start()}))})),o=m.getTileCoords(this.tileGrid,i),a=o.x,c=o.y,h=i.getTileType(),e.next=7,this.removeTileGroup([i]);case 7:return e.abrupt("return",Promise.all(n).then((function(){var e=G.SpecialEffects.BOMB;d.tileGrid[c][a]=d.addTile(a,c,e,h)})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.match4=function(){var e=l(s().mark((function e(t){var i,r,n,o,a,c,h,d,u=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[1],t.splice(1,1),r=t.every((function(e){return m.getTileCoords(u.tileGrid,e).y===m.getTileCoords(u.tileGrid,i).y})),n=i.node.getWorldPosition(),o=t.map((function(e){u.animationManager.spawnFireworkEffect(e);var t=m.getTileCoords(u.tileGrid,e);t.x,t.y;return new Promise((function(t){T(e.node).to(.2,{worldPosition:n}).call(l(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,u.removeTileGroup([e]);case 3:i.next=7;break;case 5:i.prev=5,i.t0=i.catch(0);case 7:t();case 8:case"end":return i.stop()}}),i,null,[[0,5]])})))).start()}))})),a=m.getTileCoords(this.tileGrid,i),c=a.x,h=a.y,d=i.getTileType(),e.next=9,this.removeTileGroup([i]);case 9:return e.abrupt("return",Promise.all(o).then(l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r?G.SpecialEffects.HORIZONTAL:G.SpecialEffects.VERTICAL,u.tileGrid[h][c]=u.addTile(c,h,t,d);case 2:case"end":return e.stop()}}),e)})))));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.findHintPair=function(){for(var e=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1}],t=0;t<G.GridHeight;t++)for(var i=0;i<G.GridWidth;i++){var r=this.tileGrid[t][i];if(r)for(var n,l=o(e);!(n=l()).done;){var s=n.value,a=i+s.x,c=t+s.y;if(!(c<0||c>=G.GridHeight||a<0||a>=G.GridWidth)){var h=this.tileGrid[c][a];if(h){var d=[h,r];this.tileGrid[t][i]=d[0],this.tileGrid[c][a]=d[1];var u=this.getMatches(this.tileGrid),f=[r,h];if(this.tileGrid[t][i]=f[0],this.tileGrid[c][a]=f[1],u.length>0)return[r,h]}}}}return null},a.getCanMove=function(){return this.canMove},a.showHint=function(){var e=this.findHintPair();if(e){var t=e[0],i=e[1];T().target(t.node).to(.3,{scale:new v(1.2*w.TILE.ORIGINAL.SCALE.x,1.2*w.TILE.ORIGINAL.SCALE.y,1)}).to(.3,{scale:new v(w.TILE.ORIGINAL.SCALE.x,w.TILE.ORIGINAL.SCALE.y,w.TILE.ORIGINAL.SCALE.z)}).union().repeat(2).start(),T(i.node).to(.3,{scale:new v(1.2*w.TILE.ORIGINAL.SCALE.x,1.2*w.TILE.ORIGINAL.SCALE.y,1)}).to(.3,{scale:new v(w.TILE.ORIGINAL.SCALE.x,w.TILE.ORIGINAL.SCALE.y,w.TILE.ORIGINAL.SCALE.z)}).union().repeat(2).start()}},a.getTileGrid=function(){return this.tileGrid},a.removeTileGroup=function(){var e=l(s().mark((function e(t){var i,r,n,l,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o(t);case 1:if((r=i()).done){e.next=16;break}return n=r.value,e.prev=3,e.next=6,n.match(this.animationManager);case 6:l=m.getTileCoords(this.tileGrid,n),a=l.x,c=l.y,this.tilePool.release(n),this.tileGrid[c][a]=void 0,this.point+=10,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:e.next=1;break;case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),a.getPoint=function(){return this.point},a.getEffectLayer=function(){return this.effectLayer},a.setAnimationManager=function(e){this.animationManager=e},t}(g)).prototype,"tilePoolPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"selectorPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(k.prototype,"cellPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"cellLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(k.prototype,"tileLayer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"effectLayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=k))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/Bomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(e){var r,t,n,o,i,c;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator},function(e){c=e.Tile}],execute:function(){var p;o._RF.push({},"e4355GvRBpF162R/9N/9zp5","Bomb",void 0);var s=i.ccclass;i.property,e("BombTile",s("BombTile")(p=function(e){function o(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).popped=!1,r}return r(o,e),o.prototype.match=function(){var e=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popped){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.popped=!0,r.explodeAnimation(this),e.abrupt("return",r.bombExplode(this));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),o}(c))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameKey.ts"],(function(e){var r,t,i,n,o,s,a,l,p,c,u,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Sprite,l=e.resources,p=e.SpriteFrame,c=e.Vec3,u=e.Component},function(e){f=e.GAMEKEY}],execute:function(){var L,h,y,C,m;o._RF.push({},"1b717f3bHZDLrDeOzBN4mk8","Cell",void 0);var E=s.ccclass,d=s.property;e("Cell",(L=E("Cell"),h=d(a),L((m=r((C=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,i(r,"sprite",m,n(r)),r}t(r,e);var o=r.prototype;return o.__preload=function(){if(!this.sprite)throw new Error("Sprite is required")},o.setCellType=function(e){var r=l.get("images/square"+e+"/spriteFrame",p);if(!r)throw new Error("Sprite frame for square"+e+" not found");this.sprite.spriteFrame=r,this.sprite.node.setScale(new c(f.CELL.ORIGINAL.SCALE.x,f.CELL.ORIGINAL.SCALE.y,f.CELL.ORIGINAL.SCALE.z))},r}(u)).prototype,"sprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/FireBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Images.ts"],(function(e){var r,t,i,s,a,n,p,m,o,l,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,p=e.Sprite,m=e.resources,o=e.SpriteFrame,l=e.Component},function(e){u=e.IMAGES}],execute:function(){var f,h,c,g,F;a._RF.push({},"54286QnZpBHlI10squ3EPbV","FireBall",void 0);var I=n.ccclass,L=n.property;e("Fireball",(f=I("Fireball"),h=L(p),f((F=r((g=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r=e.call.apply(e,[this].concat(a))||this,i(r,"sprite",F,s(r)),r.frames=[],r.frameTime=0,r.frameIndex=0,r}t(r,e);var a=r.prototype;return a.start=function(){this.frames.push(m.get("images/"+u.FIREBALL.IMG1+"/spriteFrame",o)),this.frames.push(m.get("images/"+u.FIREBALL.IMG2+"/spriteFrame",o)),this.frames.push(m.get("images/"+u.FIREBALL.IMG3+"/spriteFrame",o)),this.frames.push(m.get("images/"+u.FIREBALL.IMG4+"/spriteFrame",o)),this.frames.push(m.get("images/"+u.FIREBALL.IMG5+"/spriteFrame",o))},a.onLoad=function(){this.sprite=this.getComponent(p)},a.update=function(e){this.frameTime+=e;this.frameTime>=.1&&(this.frameTime-=.1,this.frameIndex=(this.frameIndex+1)%this.frames.length,this.sprite.spriteFrame=this.frames[this.frameIndex])},r}(l)).prototype,"sprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=g))||c));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"066a2a7XoVHzJHXDKi1vGjH","GameConfig",void 0);e("default",{GridWidth:8,GridHeight:8,TileWidth:64,TileHeight:64,CandyTypes:["blue","green","orange","red","yellow","purple"],TYPES:{BLUE:"blue",GREEN:"green",ORANGE:"orange",RED:"red",YELLOW:"yellow",PURPLE:"purple"},SpecialTypes:{BLUE:{HORIZONTAL:"blue_hoz",VERTICAL:"blue_ver",BOMB:"blue_bomb"},RED:{HORIZONTAL:"red_hoz",VERTICAL:"red_ver",BOMB:"red_bomb"},GREEN:{HORIZONTAL:"green_hoz",VERTICAL:"green_ver",BOMB:"green_bomb"},ORANGE:{HORIZONTAL:"orange_hoz",VERTICAL:"orange_ver",BOMB:"orange_bomb"},PURPLE:{HORIZONTAL:"purple_hoz",VERTICAL:"purple_ver",BOMB:"purple_bomb"},YELLOW:{HORIZONTAL:"yellow_hoz",VERTICAL:"yellow_ver",BOMB:"yellow_bomb"},RAINBOW:"rainbow"},SpecialEffects:{HORIZONTAL:"hoz",VERTICAL:"ver",BOMB:"bomb",RAINBOW:"rainbow"}});r._RF.pop()}}}));

System.register("chunks:///_virtual/GameKey.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"d75c5bXEmREoZXQgIzFX+5C","GameKey",void 0);e("GAMEKEY",{TILE:{INITIAL_POS:{x:-1e3,y:0},ORIGINAL:{SCALE:{x:.6,y:.6,z:1}},DEPTH:2},CELL:{ORIGINAL:{SCALE:{x:.5,y:.5,z:1}},DEPTH:0},HINT_TIME_OUT:5});c._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./GameKey.ts","./AnimationManager.ts"],(function(e){var a,t,r,n,i,o,s,l,c,u,d,g,f,h;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,s=e.Prefab,l=e.ProgressBar,c=e.instantiate,u=e.director,d=e.Component},function(e){g=e.default},function(e){f=e.GAMEKEY},function(e){h=e.default}],execute:function(){var p,b,m,M,v,w,y,P,B;i._RF.push({},"46ae41xTnJMzb4YJT35+oz1","GameManager",void 0);var C=o.ccclass,z=o.property;e("default",(p=C("GameManager"),b=z(s),m=z(s),M=z(l),p((y=a((w=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,r(a,"boardPrefab",y,n(a)),r(a,"animationManagerPrefab",P,n(a)),a.board=null,a.animationManager=void 0,a.timeSinceLastMove=0,r(a,"progressBar",B,n(a)),a.score=0,a.goal=1e3,a}t(a,e);var i=a.prototype;return i.start=function(){var e=c(this.boardPrefab);if(null===e)throw new Error("Failed to instantiate tile prefab");var a=e.getComponent(g);if(null===a)throw new Error("Failed to get tile component");this.board=a;var t=u.getScene().getChildByName("Canvas");t?t.addChild(e):this.node.addChild(e);var r=c(this.animationManagerPrefab);if(null===r)throw new Error("Failed to instantiate animation manager prefab");var n=r.getComponent(h);if(null===n)throw new Error("Failed to get tile component");this.animationManager=n,this.animationManager.setBoard(this.board),this.board.setAnimationManager(this.animationManager)},i.update=function(e){this.board.getCanMove()&&(this.timeSinceLastMove+=e,this.timeSinceLastMove>=f.HINT_TIME_OUT&&(this.timeSinceLastMove=0,this.board.showHint())),this.score=this.board.getPoint(),this.progressBar.progress=this.score/this.goal},a}(d)).prototype,"boardPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(w.prototype,"animationManagerPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=a(w.prototype,"progressBar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=w))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/HorizontalTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(t){var e,o,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){r=t.Tile}],execute:function(){var n;o._RF.push({},"cd3d9+6qzNMLJ9oOZFRq3OK","HorizontalTile",void 0);var l=i.ccclass;i.property,t("HorizontalTile",l("HorizontalTile")(n=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).popped=!1,e}return e(o,t),o.prototype.match=function(t){return this.popped?Promise.resolve():(this.popped=!0,t.explodeAnimation(this),t.spawnFireBall(!0,this))},o}(r))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/Images.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"55817Ns6VlP3qYJdkyish8u","Images",void 0);e("IMAGES",{FIREBALL:{IMG1:"FB001",IMG2:"FB002",IMG3:"FB003",IMG4:"FB004",IMG5:"FB005"}});s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AnimationManager.ts","./AssetLoader.ts","./Board.ts","./Cell.ts","./FireBall.ts","./GameManager.ts","./TilePool.ts","./Bomb.ts","./HorizontalTile.ts","./Rainbow.ts","./Tile.ts","./Vertical.ts","./Utils.ts","./GameConfig.ts","./GameKey.ts","./Images.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Rainbow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(e){var r,t,n,o,i,a;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator},function(e){a=e.Tile}],execute:function(){var c;o._RF.push({},"e7a9ezEtZRKK7KVoPLnYrLJ","Rainbow",void 0);var s=i.ccclass;i.property,e("RainbowTile",s("RainbowTile")(c=function(e){function o(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).popped=!1,r}return r(o,e),o.prototype.match=function(){var e=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popped){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.popped=!0,r.explodeAnimation(this),e.abrupt("return",r.bombExplode(this));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./GameKey.ts"],(function(e){var t,i,r,n,s,a,o,c,l,p,u,f,h,y,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,o=e._decorator,c=e.Sprite,l=e.resources,p=e.SpriteFrame,u=e.Vec3,f=e.log,h=e.Component},function(e){y=e.default},function(e){T=e.GAMEKEY}],execute:function(){var L,I,E,m,S;a._RF.push({},"5e19bkHyL5Awrn6/vovWRX0","Tile",void 0);var d=o.ccclass,A=o.property;e("Tile",(L=d("Tile"),I=A(c),L((S=t((m=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,r(t,"sprite",S,n(t)),t.tileType=y.CandyTypes[0],t.specialType="",t.callbacks=[],t}i(t,e);var a=t.prototype;return a.__preload=function(){if(!this.sprite)throw new Error("Sprite is required")},a.addOnClickCallback=function(e){this.callbacks.push(e)},a.removeOnClickCallback=function(e){this.callbacks=e?this.callbacks.filter((function(t){return t!==e})):[]},a.emitOnClick=function(){for(var e,t=s(this.callbacks);!(e=t()).done;){(0,e.value)(this)}},a.getTileType=function(){return this.tileType},a.getSpecialType=function(){return this.specialType},a.setTileType=function(e){this.tileType=e,this.specialType="";var t=l.get("images/"+e+"/spriteFrame",p);if(!t)throw new Error("Sprite frame for "+e+" not found");this.sprite.spriteFrame=t,this.sprite.node.setScale(new u(T.TILE.ORIGINAL.SCALE.x,T.TILE.ORIGINAL.SCALE.y,T.TILE.ORIGINAL.SCALE.z))},a.setSpecialType=function(e,t){this.tileType=t,this.specialType=e,f(this.tileType);var i="";i=e==y.SpecialEffects.RAINBOW?this.specialType:t+"_"+e;var r=l.get("images/"+i+"/spriteFrame",p);if(f(r),!r)throw new Error("Sprite frame for "+i+" not found");this.sprite.spriteFrame=r,this.sprite.node.setScale(new u(T.TILE.ORIGINAL.SCALE.x,T.TILE.ORIGINAL.SCALE.y,T.TILE.ORIGINAL.SCALE.z))},a.onDestroy=function(){this.callbacks=[]},a.match=function(e){return e.spawnFireworkEffect(this)},t}(h)).prototype,"sprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=m))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/TilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./Tile.ts","./GameKey.ts","./HorizontalTile.ts","./Vertical.ts","./Bomb.ts","./Rainbow.ts"],(function(e){var t,i,n,r,o,l,a,s,f,c,u,b,p,h,T,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Prefab,s=e.instantiate,f=e.Component},function(e){c=e.default},function(e){u=e.Tile},function(e){b=e.GAMEKEY},function(e){p=e.HorizontalTile},function(e){h=e.VerticalTile},function(e){T=e.BombTile},function(e){P=e.RainbowTile}],execute:function(){var y,g,d,m,v,w,C,E,z,I,x,H,L;o._RF.push({},"ff27fc83apCu5JE3TCPBfJ1","TilePool",void 0);var S=l.ccclass,_=l.property;e("TilePool",(y=S("TilePool"),g=_(a),d=_(a),m=_(a),v=_(a),w=_(a),y((z=t((E=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).tiles=[],n(t,"tilePrefab",z,r(t)),n(t,"hoztilePrefab",I,r(t)),n(t,"vertilePrefab",x,r(t)),n(t,"bombtilePrefab",H,r(t)),n(t,"rainbowtilePrefab",L,r(t)),t}i(t,e);var o=t.prototype;return o.__preload=function(){if(null===this.tilePrefab)throw new Error("Tile prefab is not set")},o.start=function(){},o.getTile=function(e,t,i,n){if(i){var r;switch(i){case c.SpecialEffects.HORIZONTAL:r=s(this.hoztilePrefab).getComponent(p);break;case c.SpecialEffects.VERTICAL:r=s(this.vertilePrefab).getComponent(h);break;case c.SpecialEffects.BOMB:r=s(this.bombtilePrefab).getComponent(T);break;case c.SpecialEffects.RAINBOW:r=s(this.rainbowtilePrefab).getComponent(P);break;default:r=s(this.tilePrefab).getComponent(u)}r.setSpecialType(i,n);var o=this.getTilePosition({x:e,y:t}),l=o.x,a=o.y;return r.node.setPosition(l,a),r}var f;if(this.tiles.length>0){f=this.tiles.pop();var b=this.getTilePosition({x:e,y:t}),y=b.x,g=b.y;f.node.setPosition(y,g);var d=c.CandyTypes[Math.floor(Math.random()*c.CandyTypes.length)];f.setTileType(d),f.node.active=!0}else f=this.creatileTile(e,t);return f},o.release=function(e){e.node.active=!1,e.removeOnClickCallback(),e.node.removeFromParent(),e.node.setPosition(b.TILE.INITIAL_POS.x,b.TILE.INITIAL_POS.y),e.constructor===u&&this.tiles.push(e)},o.creatileTile=function(e,t){var i=c.CandyTypes[Math.floor(Math.random()*c.CandyTypes.length)],n=s(this.tilePrefab);if(null===n)throw new Error("Failed to instantiate tile prefab");var r=n.getComponent(u);if(null===r)throw new Error("Failed to get tile component");r.setTileType(i);var o=this.getTilePosition({x:e,y:t}),l=o.x,a=o.y;return n.setPosition(l,a),r},o.getTilePosition=function(e){return{x:-c.GridWidth*c.TileWidth/2+c.TileWidth/2+e.x*c.TileWidth,y:-(-c.GridHeight*c.TileHeight/2+c.TileHeight/2+e.y*c.TileHeight)}},t}(f)).prototype,"tilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(E.prototype,"hoztilePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(E.prototype,"vertilePrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(E.prototype,"bombtilePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"rainbowtilePrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(t){var i,e,r,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Component},function(t){o=t.default}],execute:function(){var l;e._RF.push({},"aa293YQa05I46FaAjB4K7O/","Utils",void 0);var s=r.ccclass;r.property,t("Utils",s("Utils")(l=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.getTilePosition=function(t){return{x:-o.GridWidth*o.TileWidth/2+o.TileWidth/2+t.x*o.TileWidth,y:-(-o.GridHeight*o.TileHeight/2+o.TileHeight/2+t.y*o.TileHeight)}},e.getTileCoords=function(t,i){for(var e=0;e<o.GridHeight;e++)for(var r=0;r<o.GridWidth;r++)if(t[e][r]===i)return{x:r,y:e};throw new Error("Tile not found")},e}(n))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/Vertical.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(e){var r,t,n,i,o,a;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){i=e.cclegacy,o=e._decorator},function(e){a=e.Tile}],execute:function(){var c;i._RF.push({},"64add//g6NMGZRjfkO00hP3","Vertical",void 0);var s=o.ccclass;o.property,e("VerticalTile",s("VerticalTile")(c=function(e){function i(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(r=e.call.apply(e,[this].concat(n))||this).popped=!1,r}return r(i,e),i.prototype.match=function(){var e=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popped){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.popped=!0,r.explodeAnimation(this),e.abrupt("return",r.spawnFireBall(!1,this));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),i}(a))||c);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});